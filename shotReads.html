<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Shot Reads Table</title>
<link rel="stylesheet" type="text/css" href="styles.css">
<link rel="preconnect" href="https://fonts.googleapis.com">
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
<link href="https://fonts.googleapis.com/css2?family=Oswald:wght@200..700&display=swap" rel="stylesheet">
<link rel="icon" type="image/png" href="nhl.svg"> <!-- Add favicon -->
<style>
    table {
        width: 100%;
        border-collapse: collapse;
        font-family: "Oswald", sans-serif; /* Use Oswald font */
    }
    th, td {
        padding: 8px;
        text-align: left;
        border-bottom: 1px solid #ddd;
        cursor: pointer;
        position: relative;
        font-family: "Oswald", sans-serif; /* Use Oswald font */
    }
    th {
        background-color: #f2f2f2;
    }
    th.sorted {
        background-color: #cfd8dc; /* Change the background color to highlight sorted column */
    }
    .arrow-up:after, .arrow-down:after {
        content: '';
        position: absolute;
        top: 50%;
        right: 5px;
        transform: translateY(-50%);
    }
    .arrow-up:after {
        border-left: 5px solid transparent;
        border-right: 5px solid transparent;
        border-bottom: 5px solid black;
    }
    .arrow-down:after {
        border-left: 5px solid transparent;
        border-right: 5px solid transparent;
        border-top: 5px solid black;
    }
</style>
</head>
<body class="oswald-font"> <!-- Apply oswald-font class to body -->
<!-- Nav bar -->
<nav class="navbar">
    <div class="navbar-links">
        <ul>
            <li><a href="index.html" class="nav-link">Shots</a></li>
            <li><a href="goals.html" class="nav-link">Goals</a></li>
            <li><a href="shotReads.html" class="nav-link">Reads</a></li>
            <li><a href="goalie.html" class="nav-link">Goalies</a></li>
            <li><a href="chart.html" class="nav-link">Chart</a></li>
        </ul>
    </div>
</nav>

<!-- Container for the table -->
<div class="container">
    <!-- Table structure -->
    <table id="shotReadsTable">
        <a href="preSorted.html" class="center">View presorted list</a>
        <div class="subtitle" id="subtitle">Odds = The percentage of games that have been the line</div>
        <div class="subtitle" id="subtitle">0-5+ = The percentage of games that have hit that prop</div>
        <thead>
            <tr>
                <th onclick="sortTable(1, this)">Player<span class="arrow"></span></th>
                <th onclick="sortTable(2, this)">Line<span class="arrow"></span></th>
                <th onclick="sortTable(3, this)">Odds<span class="arrow"></span></th>
                <th onclick="sortTable(4, this)">0<span class="arrow"></span></th>
                <th onclick="sortTable(5, this)">1+<span class="arrow"></span></th>
                <th onclick="sortTable(6, this)">2+<span class="arrow"></span></th>
                <th onclick="sortTable(7, this)">3+<span class="arrow"></span></th>
                <th onclick="sortTable(8, this)">4+<span class="arrow"></span></th>
                <th onclick="sortTable(9, this)">5+<span class="arrow"></span></th>
            </tr>
        </thead>
        <tbody>
        </tbody>
    </table>
</div>

<script>
// Data initialization
const reads = `David,Pastrnak,4+,19.67%,0.00%,100.00%,98.36%,86.89%,72.13%,52.46%
Zach,Hyman,3+,24.07%,1.85%,98.15%,92.59%,72.22%,48.15%,24.07%
Adrian,Kempe,2+,28.57%,3.57%,96.43%,83.93%,55.36%,37.50%,21.43%
Connor,McDavid,2+,29.09%,1.82%,98.18%,85.45%,56.36%,38.18%,27.27%
Brock,Nelson,3+,28.07%,1.75%,98.25%,84.21%,70.18%,42.11%,15.79%
Alex,Ovechkin,3+,30.19%,7.55%,92.45%,86.79%,75.47%,45.28%,24.53%
Brady,Tkachuk,4+,32.14%,1.79%,98.21%,91.07%,82.14%,67.86%,35.71%
Mathew,Barzal,2+,24.14%,1.72%,98.28%,81.03%,56.90%,34.48%,24.14%
Drake,Batherson,1+,30.91%,9.09%,90.91%,60.00%,30.91%,23.64%,12.73%
Oliver,Bjorkstrand,1+,29.31%,6.90%,93.10%,63.79%,41.38%,20.69%,10.34%
Evan,Bouchard,1+,23.64%,9.09%,90.91%,67.27%,45.45%,32.73%,21.82%
Quinton,Byfield,2+,33.33%,16.67%,83.33%,68.52%,35.19%,14.81%,3.70%
John,Carlson,2+,26.79%,12.50%,87.50%,62.50%,35.71%,14.29%,1.79%
Thomas,Chabot,2+,27.27%,9.09%,90.91%,72.73%,45.45%,21.21%,12.12%
Jakob,Chychrun,1+,29.09%,5.45%,94.55%,65.45%,38.18%,20.00%,9.09%
Jake,DeBrusk,1+,29.82%,5.26%,94.74%,64.91%,42.11%,15.79%,3.51%
Noah,Dobson,1+,22.81%,12.28%,87.72%,64.91%,42.11%,21.05%,10.53%
Leon,Draisaitl,2+,33.33%,7.02%,92.98%,77.19%,43.86%,22.81%,14.04%
Matt,Duchene,2+,29.82%,8.77%,91.23%,66.67%,36.84%,12.28%,1.75%
Vince,Dunn,2+,32.08%,13.21%,86.79%,67.92%,35.85%,13.21%,3.77%
Jordan,Eberle,3+,28.30%,9.43%,90.57%,66.04%,41.51%,13.21%,5.66%
Kevin,Fiala,2+,23.21%,8.93%,91.07%,73.21%,50.00%,33.93%,14.29%
Warren,Foegele,2+,32.73%,12.73%,87.27%,69.09%,36.36%,25.45%,14.55%
Claude,Giroux,2+,27.27%,9.09%,90.91%,76.36%,49.09%,27.27%,10.91%
Thomas,Harley,1+,28.57%,16.07%,83.93%,55.36%,26.79%,14.29%,5.36%
Miro,Heiskanen,2+,25.00%,16.67%,83.33%,66.67%,41.67%,20.83%,6.25%
Roope,Hintz,2+,26.32%,15.79%,84.21%,66.67%,40.35%,17.54%,5.26%
Bo,Horvat,2+,26.79%,1.79%,98.21%,85.71%,58.93%,39.29%,16.07%
Wyatt,Johnston,1+,23.73%,10.17%,89.83%,66.10%,47.46%,23.73%,3.39%
Evander,Kane,3+,25.93%,3.70%,96.30%,83.33%,62.96%,37.04%,18.52%
Anders,Lee,2+,26.32%,10.53%,89.47%,66.67%,40.35%,22.81%,10.53%
Brad,Marchand,2+,28.81%,15.25%,84.75%,77.97%,49.15%,30.51%,15.25%
Jared,McCann,2+,23.21%,7.14%,92.86%,73.21%,50.00%,26.79%,8.93%
Trevor,Moore,4+,23.21%,0.00%,100.00%,82.14%,60.71%,42.86%,19.64%
Ryan,Nugent-Hopkins,1+,37.04%,7.41%,92.59%,55.56%,42.59%,22.22%,9.26%
Max,Pacioretty,3+,28.57%,14.29%,85.71%,61.90%,52.38%,23.81%,9.52%
Kyle,Palmieri,2+,24.56%,12.28%,87.72%,64.91%,40.35%,21.05%,14.04%
Joe,Pavelski,1+,27.12%,6.78%,93.22%,66.10%,42.37%,25.42%,10.17%
Shane,Pinto,4+,28.57%,0.00%,100.00%,85.71%,64.29%,42.86%,14.29%
Jason,Robertson,2+,30.51%,6.78%,93.22%,76.27%,45.76%,27.12%,22.03%
Jake,Sanderson,1+,26.92%,17.31%,82.69%,55.77%,36.54%,21.15%,5.77%
Dylan,Strome,1+,25.00%,12.50%,87.50%,62.50%,37.50%,14.29%,8.93%
Tim,Stutzle,2+,27.27%,1.82%,98.18%,72.73%,45.45%,25.45%,9.09%
Vladimir,Tarasenko,1+,28.30%,15.09%,84.91%,56.60%,37.74%,15.09%,5.66%
Tom,Wilson,1+,30.36%,7.14%,92.86%,62.50%,35.71%,25.00%,10.71%
Matty,Beniers,1+,26.92%,17.31%,82.69%,55.77%,30.77%,7.69%,0.00%
Jamie,Benn,1+,27.12%,25.42%,74.58%,47.46%,25.42%,15.25%,6.78%
Andre,Burakovsky,1+,34.62%,23.08%,76.92%,42.31%,23.08%,3.85%,3.85%
Phillip,Danault,1+,32.14%,7.14%,92.86%,60.71%,30.36%,16.07%,3.57%
Pierre-Luc,Dubois,1+,25.00%,17.86%,82.14%,57.14%,33.93%,12.50%,0.00%
Pierre,Engvall,1+,25.49%,19.61%,80.39%,54.90%,29.41%,5.88%,1.96%
Yanni,Gourde,3+,27.27%,12.73%,87.27%,61.82%,40.00%,12.73%,9.09%
Alex,Laferriere,2+,34.55%,12.73%,87.27%,61.82%,27.27%,10.91%,3.64%
Mason,Marchment,0+,25.86%,25.86%,74.14%,51.72%,34.48%,13.79%,8.62%
Charles,McAvoy,1+,31.37%,11.76%,88.24%,56.86%,27.45%,11.76%,5.88%
Joshua,Norris,2+,33.33%,10.42%,89.58%,72.92%,39.58%,20.83%,8.33%
Darnell,Nurse,1+,25.45%,12.73%,87.27%,61.82%,38.18%,16.36%,3.64%
Mike,Reilly-2,2+,27.78%,13.89%,86.11%,66.67%,38.89%,22.22%,5.56%
Jaden,Schwartz,1+,39.02%,2.44%,97.56%,58.54%,34.15%,9.76%,7.32%
Eeli,Tolvanen,2+,26.32%,17.54%,82.46%,57.89%,31.58%,21.05%,5.26%
Pavel,Zacha,2+,29.09%,16.36%,83.64%,61.82%,32.73%,10.91%,1.82%
James,van-Riemsdyk,2+,30.91%,7.27%,92.73%,69.09%,38.18%,16.36%,5.45%`;

const shotReads = reads.split('\n');

    // Table body reference
    const tableBody = document.querySelector('#shotReadsTable tbody');
    let prevArrow = null;
    let prevHeader = null; // Added variable to store previously sorted header

    // Function to populate table with data
    function populateTable(data) {
        tableBody.innerHTML = '';
        data.forEach(line => {
            const [firstName, lastName, lineName, odds, zero, one, two, three, four, five] = line.split(',');
    
            const row = document.createElement('tr');
            row.innerHTML = `
                <td>${firstName} ${lastName}</td>
                <td>${lineName}</td>
                <td>${odds}</td>
                <td>${zero}</td>
                <td>${one}</td>
                <td>${two}</td>
                <td>${three}</td>
                <td>${four}</td>
                <td>${five}</td>
            `;
            tableBody.appendChild(row);
        });
    }

    // Initial population of table
    populateTable(shotReads);

    // Function to sort table data
    function sortTable(colIndex, header) {
        console.log('Sorting column index:', colIndex);
        const arrow = header.querySelector('.arrow');
        const isAscending = arrow.classList.contains('arrow-up');
        console.log('Sort direction:', isAscending ? 'Ascending' : 'Descending');

        // Remove arrow from previous header
        if (prevArrow && prevArrow !== arrow) {
            prevArrow.classList.remove('arrow-up', 'arrow-down');
            prevHeader.classList.remove('sorted'); // Remove sorted class from previously sorted column
        }

        // Toggle arrow direction
        arrow.classList.toggle('arrow-up', !isAscending);
        arrow.classList.toggle('arrow-down', isAscending);

        // Add sorted class to current header
        header.classList.add('sorted');
        
        // Update previous arrow and header
        prevArrow = arrow;
        prevHeader = header;

        // Get data type based on column index
        const dataType = getDataType(colIndex);
        console.log('Data type:', dataType);

        // Sort data
        shotReads.sort((a, b) => {
            const valA = getDataValue(a.split(',')[colIndex], dataType);
            const valB = getDataValue(b.split(',')[colIndex], dataType);

            if (typeof valA === 'string' && typeof valB === 'string') {
                // Case insensitive alphabetical sorting
                return isAscending ? valA.localeCompare(valB) : valB.localeCompare(valA);
            } else {
                // Numeric sorting
                console.log('Value A:', valA);
                console.log('Value B:', valB);
                return isAscending ? valA - valB : valB - valA;
            }
        });

        // Repopulate table
        populateTable(shotReads);
    }

    // Function to get data type of a column
    function getDataType(colIndex) {
        switch (colIndex) {
            case 0: // Player
            case 1: // Line
                return 'string';
            default: // Odds, 0, 1+, 2+, 3+, 4+, 5+
                return 'number';
        }
    }

    // Function to get data value
    function getDataValue(value, dataType) {
        return dataType === 'number' ? parseFloat(value) : value.toLowerCase();
    }

// Add this JavaScript to highlight the active link based on the current page
document.addEventListener('DOMContentLoaded', function() {
    var currentUrl = window.location.href;
    var navLinks = document.querySelectorAll('.nav-link');

    navLinks.forEach(function(navLink) {
        if (navLink.href === currentUrl) {
            navLink.classList.add('active');
        }
    });
});
</script>

</body>
</html>
