<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Shot Reads Table</title>
<link rel="stylesheet" type="text/css" href="styles.css">
<link rel="preconnect" href="https://fonts.googleapis.com">
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
<link href="https://fonts.googleapis.com/css2?family=Oswald:wght@200..700&display=swap" rel="stylesheet">
<link rel="icon" type="image/png" href="nhl.svg"> <!-- Add favicon -->
<style>
    table {
        width: 100%;
        border-collapse: collapse;
        font-family: "Oswald", sans-serif; /* Use Oswald font */
    }
    th, td {
        padding: 8px;
        text-align: left;
        border-bottom: 1px solid #ddd;
        cursor: pointer;
        position: relative;
        font-family: "Oswald", sans-serif; /* Use Oswald font */
    }
    th {
        background-color: #f2f2f2;
    }
    th.sorted {
        background-color: #cfd8dc; /* Change the background color to highlight sorted column */
    }
    .arrow-up:after, .arrow-down:after {
        content: '';
        position: absolute;
        top: 50%;
        right: 5px;
        transform: translateY(-50%);
    }
    .arrow-up:after {
        border-left: 5px solid transparent;
        border-right: 5px solid transparent;
        border-bottom: 5px solid black;
    }
    .arrow-down:after {
        border-left: 5px solid transparent;
        border-right: 5px solid transparent;
        border-top: 5px solid black;
    }
</style>
</head>
<body class="oswald-font"> <!-- Apply oswald-font class to body -->
<!-- Nav bar -->
<nav class="navbar">
    <div class="navbar-links">
        <ul>
            <li><a href="index.html" class="nav-link">Shots</a></li>
            <li><a href="goals.html" class="nav-link">Goals</a></li>
            <li><a href="shotReads.html" class="nav-link">Reads</a></li>
            <li><a href="goalie.html" class="nav-link">Goalies</a></li>
            <li><a href="chart.html" class="nav-link">Chart</a></li>
        </ul>
    </div>
</nav>

<!-- Container for the table -->
<div class="container">
    <!-- Table structure -->
    <table id="shotReadsTable">
        <a href="preSorted.html" class="center">View presorted list</a>
        <div class="subtitle" id="subtitle">Odds = The percentage of games that have been the line</div>
        <div class="subtitle" id="subtitle">0-5+ = The percentage of games that have hit that prop</div>
        <thead>
            <tr>
                <th onclick="sortTable(1, this)">Player<span class="arrow"></span></th>
                <th onclick="sortTable(2, this)">Line<span class="arrow"></span></th>
                <th onclick="sortTable(3, this)">Odds<span class="arrow"></span></th>
                <th onclick="sortTable(4, this)">0<span class="arrow"></span></th>
                <th onclick="sortTable(5, this)">1+<span class="arrow"></span></th>
                <th onclick="sortTable(6, this)">2+<span class="arrow"></span></th>
                <th onclick="sortTable(7, this)">3+<span class="arrow"></span></th>
                <th onclick="sortTable(8, this)">4+<span class="arrow"></span></th>
                <th onclick="sortTable(9, this)">5+<span class="arrow"></span></th>
            </tr>
        </thead>
        <tbody>
        </tbody>
    </table>
</div>

<script>
// Data initialization
const reads = `Jack,Hughes,4+,18.18%,0.00%,100.00%,86.36%,77.27%,68.18%,50.00%
Kirill,Kaprizov,2+,23.64%,1.82%,98.18%,87.27%,63.64%,43.64%,27.27%
Matthew,Boldy,2+,27.78%,3.70%,96.30%,83.33%,55.56%,37.04%,18.52%
Kyle,Connor,3+,20.45%,0.00%,100.00%,84.09%,65.91%,45.45%,31.82%
Sidney,Crosby,3+,27.12%,1.69%,98.31%,91.53%,76.27%,49.15%,25.42%
Joel,Eriksson-Ek,3+,24.59%,3.28%,96.72%,90.16%,75.41%,50.82%,26.23%
Zach,Hyman,3+,24.56%,1.75%,98.25%,91.23%,71.93%,47.37%,24.56%
Adrian,Kempe,2+,28.07%,3.51%,96.49%,84.21%,56.14%,38.60%,22.81%
Connor,McDavid,2+,29.31%,1.72%,98.28%,86.21%,56.90%,37.93%,25.86%
Alex,Ovechkin,3+,28.57%,8.93%,91.07%,85.71%,73.21%,44.64%,25.00%
Tage,Thompson,2+,23.53%,3.92%,96.08%,88.24%,64.71%,50.98%,33.33%
Tyler,Toffoli,2+,30.51%,5.08%,94.92%,81.36%,50.85%,40.68%,22.03%
Nick,Bjugstad,1+,36.67%,10.00%,90.00%,53.33%,33.33%,20.00%,8.33%
Brock,Boeser,1+,22.22%,9.52%,90.48%,68.25%,49.21%,30.16%,14.29%
Evan,Bouchard,1+,24.14%,8.62%,91.38%,67.24%,44.83%,31.03%,20.69%
Jesper,Bratt,3+,29.51%,4.92%,95.08%,83.61%,60.66%,31.15%,19.67%
Quinton,Byfield,2+,35.09%,15.79%,84.21%,68.42%,33.33%,14.04%,3.51%
John,Carlson,2+,27.12%,13.56%,86.44%,61.02%,33.90%,13.56%,1.69%
Dylan,Cozens,2+,29.31%,13.79%,86.21%,70.69%,41.38%,25.86%,17.24%
Lawson,Crouse,1+,22.03%,13.56%,86.44%,64.41%,42.37%,20.34%,8.47%
Rasmus,Dahlin,3+,22.58%,4.84%,95.16%,75.81%,56.45%,33.87%,20.97%
Leon,Draisaitl,2+,31.67%,6.67%,93.33%,78.33%,46.67%,23.33%,15.00%
Anthony,Duclair,2+,33.33%,22.22%,77.78%,55.56%,22.22%,11.11%,5.56%
Nikolaj,Ehlers,3+,22.03%,6.78%,93.22%,74.58%,59.32%,37.29%,16.95%
Kevin,Fiala,2+,22.03%,8.47%,91.53%,74.58%,52.54%,33.90%,15.25%
Warren,Foegele,2+,31.03%,13.79%,86.21%,67.24%,36.21%,25.86%,15.52%
Conor,Garland,2+,33.87%,6.45%,93.55%,66.13%,32.26%,14.52%,9.68%
Dylan,Guenther,2+,30.43%,8.70%,91.30%,65.22%,34.78%,13.04%,8.70%
Ryan,Hartman,3+,26.79%,12.50%,87.50%,64.29%,44.64%,17.86%,5.36%
Adam,Henrique,1+,32.20%,11.86%,88.14%,55.93%,23.73%,13.56%,3.39%
Nico,Hischier,3+,24.49%,14.29%,85.71%,71.43%,48.98%,24.49%,18.37%
Filip,Hronek,1+,29.03%,17.74%,82.26%,53.23%,29.03%,16.13%,8.06%
Quinn,Hughes,1+,30.16%,7.94%,92.06%,61.90%,41.27%,23.81%,11.11%
Evander,Kane,3+,26.32%,3.51%,96.49%,84.21%,63.16%,36.84%,17.54%
Erik,Karlsson,2+,32.76%,6.90%,93.10%,74.14%,41.38%,20.69%,6.90%
Alex,Killorn,4+,24.39%,17.07%,82.93%,63.41%,41.46%,31.71%,7.32%
Kris,Letang,1+,29.31%,8.62%,91.38%,62.07%,37.93%,13.79%,5.17%
Elias,Lindholm,3+,22.22%,11.11%,88.89%,68.25%,47.62%,25.40%,12.70%
Evgeni,Malkin,2+,31.03%,12.07%,87.93%,79.31%,48.28%,25.86%,13.79%
Connor,McMichael,1+,40.35%,14.04%,85.96%,45.61%,24.56%,14.04%,3.51%
Mason,McTavish,2+,34.62%,9.62%,90.38%,71.15%,36.54%,17.31%,7.69%
Timo,Meier,1+,23.40%,8.51%,91.49%,68.09%,51.06%,29.79%,21.28%
JT,Miller,2+,26.98%,9.52%,90.48%,66.67%,39.68%,20.63%,3.17%
Sean,Monahan,1+,27.12%,8.47%,91.53%,64.41%,37.29%,18.64%,6.78%
Trevor,Moore,4+,23.73%,0.00%,100.00%,79.66%,59.32%,42.37%,18.64%
Joshua,Morrissey,3+,23.73%,11.86%,88.14%,67.80%,47.46%,23.73%,8.47%
Ryan,Nugent-Hopkins,1+,35.09%,8.77%,91.23%,56.14%,40.35%,21.05%,8.77%
Max,Pacioretty,3+,25.00%,12.50%,87.50%,66.67%,45.83%,20.83%,8.33%
John-Jason,Peterka,2+,22.95%,8.20%,91.80%,77.05%,54.10%,32.79%,14.75%
Elias,Pettersson,2+,26.98%,9.52%,90.48%,73.02%,46.03%,30.16%,14.29%
Rickard,Rakell,1+,21.74%,13.04%,86.96%,65.22%,43.48%,23.91%,15.22%
Mark,Scheifele,3+,35.85%,9.43%,90.57%,66.04%,49.06%,13.21%,3.77%
Nick,Schmaltz,1+,22.81%,15.79%,84.21%,61.40%,40.35%,17.54%,7.02%
Jeff,Skinner,4+,22.64%,3.77%,96.23%,79.25%,62.26%,43.40%,20.75%
Dylan,Strome,1+,27.12%,11.86%,88.14%,61.02%,35.59%,13.56%,8.47%
Troy,Terry,2+,27.27%,14.55%,85.45%,63.64%,36.36%,27.27%,16.36%
Alex,Tuch,1+,27.78%,5.56%,94.44%,66.67%,44.44%,24.07%,11.11%
Frank,Vatrano,4+,22.95%,4.92%,95.08%,80.33%,63.93%,44.26%,21.31%
Tom,Wilson,1+,32.20%,8.47%,91.53%,59.32%,33.90%,23.73%,10.17%
Filip,Zadina,1+,33.33%,12.96%,87.04%,53.70%,22.22%,12.96%,7.41%
Fabian,Zetterlund,1+,28.81%,5.08%,94.92%,66.10%,38.98%,16.95%,5.08%
Mats,Zuccarello,1+,26.92%,5.77%,94.23%,67.31%,40.38%,25.00%,9.62%
Alexander,Barabanov,0+,35.14%,35.14%,64.86%,43.24%,18.92%,10.81%,2.70%
Jonas,Brodin,2+,32.56%,11.63%,88.37%,62.79%,30.23%,11.63%,6.98%
Logan,Cooley,1+,30.00%,21.67%,78.33%,48.33%,28.33%,10.00%,1.67%
Phillip,Danault,1+,30.51%,8.47%,91.53%,61.02%,32.20%,18.64%,5.08%
Drew,Doughty,2+,30.51%,16.95%,83.05%,57.63%,27.12%,8.47%,1.69%
Pierre-Luc,Dubois,2+,25.42%,18.64%,81.36%,57.63%,32.20%,11.86%,0.00%
Sean,Durzi,2+,40.74%,14.81%,85.19%,61.11%,20.37%,9.26%,0.00%
Mattias,Ekholm,1+,33.33%,14.04%,85.96%,52.63%,33.33%,21.05%,8.77%
William,Eklund,2+,31.03%,20.69%,79.31%,50.00%,18.97%,8.62%,5.17%
Lars,Eller,2+,25.86%,13.79%,86.21%,62.07%,36.21%,12.07%,3.45%
Brock,Faber,2+,31.15%,29.51%,70.49%,47.54%,16.39%,11.48%,3.28%
Mikael,Granlund,1+,36.96%,13.04%,86.96%,50.00%,34.78%,17.39%,2.17%
Erik,Haula,1+,38.89%,11.11%,88.89%,50.00%,31.48%,16.67%,5.56%
Barrett,Hayton,2+,28.57%,25.00%,75.00%,60.71%,32.14%,17.86%,3.57%
Nils,Hoglander,1+,38.33%,21.67%,78.33%,40.00%,20.00%,6.67%,1.67%
Marcus,Johansson,1+,32.79%,26.23%,73.77%,40.98%,24.59%,4.92%,1.64%
Anze,Kopitar,2+,33.90%,13.56%,86.44%,57.63%,23.73%,6.78%,1.69%
Alex,Laferriere,2+,36.21%,12.07%,87.93%,63.79%,27.59%,10.34%,3.45%
Matias,Maccelli,1+,35.00%,15.00%,85.00%,50.00%,26.67%,10.00%,5.00%
Anthony,Mantha,1+,32.73%,25.45%,74.55%,41.82%,18.18%,10.91%,5.45%
Casey,Mittelstadt,1+,29.51%,21.31%,78.69%,49.18%,26.23%,9.84%,1.64%
Nino,Niederreiter,3+,25.42%,18.64%,81.36%,64.41%,47.46%,22.03%,10.17%
Darnell,Nurse,1+,24.14%,12.07%,87.93%,63.79%,39.66%,15.52%,3.45%
Drew,OConnor,1+,29.31%,15.52%,84.48%,55.17%,27.59%,15.52%,5.17%
Aliaksei,Protas,1+,37.93%,20.69%,79.31%,41.38%,20.69%,1.72%,1.72%
Marco,Rossi,2+,24.59%,16.39%,83.61%,60.66%,36.07%,13.11%,4.92%
Reilly,Smith,2+,34.62%,11.54%,88.46%,63.46%,28.85%,11.54%,3.85%
Ryan,Strome,1+,31.58%,21.05%,78.95%,47.37%,19.30%,14.04%,7.02%
Pius,Suter,1+,33.33%,27.08%,72.92%,39.58%,22.92%,16.67%,4.17%
Gabriel,Vilardi,3+,23.68%,15.79%,84.21%,65.79%,52.63%,28.95%,7.89%
Jason,Zucker,2+,36.00%,10.00%,90.00%,62.00%,26.00%,12.00%,4.00%`;

const shotReads = reads.split('\n');

    // Table body reference
    const tableBody = document.querySelector('#shotReadsTable tbody');
    let prevArrow = null;
    let prevHeader = null; // Added variable to store previously sorted header

    // Function to populate table with data
    function populateTable(data) {
        tableBody.innerHTML = '';
        data.forEach(line => {
            const [firstName, lastName, lineName, odds, zero, one, two, three, four, five] = line.split(',');
    
            const row = document.createElement('tr');
            row.innerHTML = `
                <td>${firstName} ${lastName}</td>
                <td>${lineName}</td>
                <td>${odds}</td>
                <td>${zero}</td>
                <td>${one}</td>
                <td>${two}</td>
                <td>${three}</td>
                <td>${four}</td>
                <td>${five}</td>
            `;
            tableBody.appendChild(row);
        });
    }

    // Initial population of table
    populateTable(shotReads);

    // Function to sort table data
    function sortTable(colIndex, header) {
        console.log('Sorting column index:', colIndex);
        const arrow = header.querySelector('.arrow');
        const isAscending = arrow.classList.contains('arrow-up');
        console.log('Sort direction:', isAscending ? 'Ascending' : 'Descending');

        // Remove arrow from previous header
        if (prevArrow && prevArrow !== arrow) {
            prevArrow.classList.remove('arrow-up', 'arrow-down');
            prevHeader.classList.remove('sorted'); // Remove sorted class from previously sorted column
        }

        // Toggle arrow direction
        arrow.classList.toggle('arrow-up', !isAscending);
        arrow.classList.toggle('arrow-down', isAscending);

        // Add sorted class to current header
        header.classList.add('sorted');
        
        // Update previous arrow and header
        prevArrow = arrow;
        prevHeader = header;

        // Get data type based on column index
        const dataType = getDataType(colIndex);
        console.log('Data type:', dataType);

        // Sort data
        shotReads.sort((a, b) => {
            const valA = getDataValue(a.split(',')[colIndex], dataType);
            const valB = getDataValue(b.split(',')[colIndex], dataType);

            if (typeof valA === 'string' && typeof valB === 'string') {
                // Case insensitive alphabetical sorting
                return isAscending ? valA.localeCompare(valB) : valB.localeCompare(valA);
            } else {
                // Numeric sorting
                console.log('Value A:', valA);
                console.log('Value B:', valB);
                return isAscending ? valA - valB : valB - valA;
            }
        });

        // Repopulate table
        populateTable(shotReads);
    }

    // Function to get data type of a column
    function getDataType(colIndex) {
        switch (colIndex) {
            case 0: // Player
            case 1: // Line
                return 'string';
            default: // Odds, 0, 1+, 2+, 3+, 4+, 5+
                return 'number';
        }
    }

    // Function to get data value
    function getDataValue(value, dataType) {
        return dataType === 'number' ? parseFloat(value) : value.toLowerCase();
    }

// Add this JavaScript to highlight the active link based on the current page
document.addEventListener('DOMContentLoaded', function() {
    var currentUrl = window.location.href;
    var navLinks = document.querySelectorAll('.nav-link');

    navLinks.forEach(function(navLink) {
        if (navLink.href === currentUrl) {
            navLink.classList.add('active');
        }
    });
});
</script>

</body>
</html>
