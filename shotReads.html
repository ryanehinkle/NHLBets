<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Shot Reads Table</title>
<link rel="stylesheet" type="text/css" href="styles.css">
<link rel="preconnect" href="https://fonts.googleapis.com">
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
<link href="https://fonts.googleapis.com/css2?family=Oswald:wght@200..700&display=swap" rel="stylesheet">
<link rel="icon" type="image/png" href="nhl.svg"> <!-- Add favicon -->
<style>
    table {
        width: 100%;
        border-collapse: collapse;
        font-family: "Oswald", sans-serif; /* Use Oswald font */
    }
    th, td {
        padding: 8px;
        text-align: left;
        border-bottom: 1px solid #ddd;
        cursor: pointer;
        position: relative;
        font-family: "Oswald", sans-serif; /* Use Oswald font */
    }
    th {
        background-color: #f2f2f2;
    }
    th.sorted {
        background-color: #cfd8dc; /* Change the background color to highlight sorted column */
    }
    .arrow-up:after, .arrow-down:after {
        content: '';
        position: absolute;
        top: 50%;
        right: 5px;
        transform: translateY(-50%);
    }
    .arrow-up:after {
        border-left: 5px solid transparent;
        border-right: 5px solid transparent;
        border-bottom: 5px solid black;
    }
    .arrow-down:after {
        border-left: 5px solid transparent;
        border-right: 5px solid transparent;
        border-top: 5px solid black;
    }
</style>
</head>
<body class="oswald-font"> <!-- Apply oswald-font class to body -->
<!-- Nav bar -->
<nav class="navbar">
    <div class="navbar-links">
        <ul>
            <li><a href="index.html" class="nav-link">Shots</a></li>
            <li><a href="goals.html" class="nav-link">Goals</a></li>
            <li><a href="shotReads.html" class="nav-link">Reads</a></li>
            <li><a href="chart.html" class="nav-link">Chart</a></li>
        </ul>
    </div>
</nav>

<!-- Container for the table -->
<div class="container">
    <!-- Table structure -->
    <table id="shotReadsTable">
        <a href="preSorted.html" class="center">View presorted list</a>
        <div class="subtitle" id="subtitle">Odds = The percentage of games that have been the line</div>
        <div class="subtitle" id="subtitle">0-5+ = The percentage of games that have hit that prop</div>
        <thead>
            <tr>
                <th onclick="sortTable(1, this)">Player<span class="arrow"></span></th>
                <th onclick="sortTable(2, this)">Line<span class="arrow"></span></th>
                <th onclick="sortTable(3, this)">Odds<span class="arrow"></span></th>
                <th onclick="sortTable(4, this)">0<span class="arrow"></span></th>
                <th onclick="sortTable(5, this)">1+<span class="arrow"></span></th>
                <th onclick="sortTable(6, this)">2+<span class="arrow"></span></th>
                <th onclick="sortTable(7, this)">3+<span class="arrow"></span></th>
                <th onclick="sortTable(8, this)">4+<span class="arrow"></span></th>
                <th onclick="sortTable(9, this)">5+<span class="arrow"></span></th>
            </tr>
        </thead>
        <tbody>
        </tbody>
    </table>
</div>

<script>
// Data initialization
const reads = `Auston,Matthews,4+,20.00%,0.00%,100.00%,90.91%,76.36%,58.18%,38.18%
David,Pastrnak,4+,18.97%,0.00%,100.00%,98.28%,86.21%,70.69%,51.72%
Owen,Tippett,3+,19.23%,3.85%,96.15%,84.62%,71.15%,51.92%,34.62%
Cole,Caufield,2+,16.67%,5.56%,94.44%,83.33%,66.67%,51.85%,35.19%
Rasmus,Dahlin,3+,23.21%,5.36%,94.64%,76.79%,58.93%,35.71%,21.43%
Zach,Hyman,3+,25.49%,1.96%,98.04%,92.16%,72.55%,47.06%,21.57%
Boone,Jenner,2+,27.50%,12.50%,87.50%,80.00%,52.50%,32.50%,12.50%
Travis,Konecny,2+,24.56%,0.00%,100.00%,89.47%,64.91%,40.35%,21.05%
Connor,McDavid,2+,28.85%,1.92%,98.08%,84.62%,55.77%,36.54%,26.92%
William,Nylander,4+,23.21%,1.79%,98.21%,94.64%,76.79%,58.93%,35.71%
John,Tavares,4+,32.69%,5.77%,94.23%,84.62%,71.15%,59.62%,26.92%
Tage,Thompson,2+,26.67%,4.44%,95.56%,86.67%,60.00%,48.89%,31.11%
Zachary,Werenski,2+,41.46%,2.44%,97.56%,87.80%,46.34%,26.83%,14.63%
Cam,Atkinson,2+,23.64%,7.27%,92.73%,78.18%,54.55%,32.73%,14.55%
Connor,Bedard,3+,26.19%,9.52%,90.48%,76.19%,61.90%,35.71%,26.19%
Tyler,Bertuzzi,2+,30.19%,16.98%,83.02%,56.60%,26.42%,13.21%,7.55%
Evan,Bouchard,1+,25.00%,7.69%,92.31%,67.31%,46.15%,32.69%,23.08%
Yegor,Chinakhov,1+,26.83%,19.51%,80.49%,53.66%,29.27%,21.95%,12.20%
Sean,Couturier,2+,32.69%,1.92%,98.08%,80.77%,48.08%,25.00%,15.38%
Dylan,Cozens,2+,26.92%,15.38%,84.62%,69.23%,42.31%,26.92%,19.23%
Leon,Draisaitl,2+,29.63%,7.41%,92.59%,75.93%,46.30%,24.07%,14.81%
Joel,Farabee,3+,28.57%,3.57%,96.43%,71.43%,44.64%,16.07%,10.71%
Warren,Foegele,2+,34.62%,13.46%,86.54%,67.31%,32.69%,23.08%,11.54%
Morgan,Frost,1+,35.56%,6.67%,93.33%,57.78%,24.44%,13.33%,2.22%
Johnny,Gaudreau,1+,26.42%,18.87%,81.13%,54.72%,33.96%,22.64%,11.32%
Adam,Henrique,1+,33.33%,11.11%,88.89%,55.56%,24.07%,12.96%,3.70%
Seth,Jones,1+,36.59%,7.32%,92.68%,56.10%,36.59%,24.39%,19.51%
Evander,Kane,3+,27.45%,3.92%,96.08%,82.35%,62.75%,35.29%,19.61%
Clayton,Keller,3+,24.56%,3.51%,96.49%,77.19%,54.39%,29.82%,19.30%
Alex,Killorn,2+,25.00%,16.67%,83.33%,63.89%,38.89%,30.56%,8.33%
Brad,Marchand,2+,28.57%,16.07%,83.93%,78.57%,50.00%,32.14%,16.07%
Kirill,Marchenko,2+,27.45%,5.88%,94.12%,76.47%,49.02%,25.49%,9.80%
Mitchell,Marner,1+,25.45%,5.45%,94.55%,69.09%,47.27%,25.45%,10.91%
Michael,Matheson,2+,25.93%,7.41%,92.59%,72.22%,46.30%,27.78%,12.96%
Ryan,Nugent-Hopkins,1+,36.54%,5.77%,94.23%,57.69%,44.23%,23.08%,9.62%
John-Jason,Peterka,3+,23.64%,5.45%,94.55%,78.18%,58.18%,34.55%,16.36%
Jeff,Skinner,4+,21.28%,4.26%,95.74%,78.72%,61.70%,42.55%,21.28%
Juraj,Slafkovsky,1+,27.78%,25.93%,74.07%,46.30%,20.37%,9.26%,7.41%
Nick,Suzuki,1+,32.14%,5.36%,94.64%,62.50%,37.50%,19.64%,7.14%
Troy,Terry,2+,26.92%,13.46%,86.54%,63.46%,36.54%,26.92%,15.38%
Alex,Tuch,1+,27.08%,4.17%,95.83%,68.75%,47.92%,25.00%,10.42%
Frank,Vatrano,4+,25.00%,5.36%,94.64%,80.36%,62.50%,46.43%,21.43%
Josh,Anderson,1+,24.00%,18.00%,82.00%,58.00%,36.00%,16.00%,8.00%
Joel,Armia,3+,34.21%,18.42%,81.58%,63.16%,44.74%,10.53%,2.63%
Nick,Bjugstad,1+,38.18%,9.09%,90.91%,52.73%,32.73%,18.18%,7.27%
Leo,Carlsson,1+,27.78%,13.89%,86.11%,58.33%,33.33%,13.89%,8.33%
Logan,Cooley,1+,30.91%,23.64%,76.36%,45.45%,27.27%,10.91%,1.82%
Lawson,Crouse,2+,22.22%,14.81%,85.19%,64.81%,42.59%,20.37%,9.26%
Jake,DeBrusk,1+,31.48%,3.70%,96.30%,64.81%,40.74%,14.81%,1.85%
Max,Domi,1+,44.44%,14.81%,85.19%,40.74%,18.52%,1.85%,0.00%
Sean,Durzi,2+,38.78%,16.33%,83.67%,61.22%,22.45%,10.20%,0.00%
Nick,Foligno,1+,30.61%,12.24%,87.76%,57.14%,38.78%,8.16%,6.12%
Brendan,Gallagher,2+,32.65%,16.33%,83.67%,63.27%,30.61%,16.33%,4.08%
Jordan,Greenway,1+,37.21%,25.58%,74.42%,37.21%,20.93%,6.98%,2.33%
Dylan,Guenther,1+,33.33%,11.11%,88.89%,55.56%,27.78%,11.11%,11.11%
Tyler,Johnson,1+,29.27%,24.39%,75.61%,46.34%,31.71%,7.32%,4.88%
Scott,Laughton,2+,28.57%,10.71%,89.29%,64.29%,35.71%,17.86%,3.57%
Charles,McAvoy,1+,31.25%,10.42%,89.58%,58.33%,27.08%,12.50%,6.25%
Bobby,McMann,1+,30.00%,26.67%,73.33%,43.33%,23.33%,16.67%,3.33%
Mason,McTavish,2+,38.30%,10.64%,89.36%,72.34%,34.04%,14.89%,4.26%
Casey,Mittelstadt,1+,29.09%,20.00%,80.00%,50.91%,29.09%,10.91%,1.82%
Alex,Newhook,1+,40.74%,14.81%,85.19%,44.44%,18.52%,3.70%,0.00%
Darnell,Nurse,1+,25.00%,13.46%,86.54%,61.54%,38.46%,15.38%,3.85%
Nick,Schmaltz,3+,25.00%,15.38%,84.62%,61.54%,38.46%,13.46%,5.77%
Cole,Sillinger,1+,31.25%,14.58%,85.42%,54.17%,22.92%,10.42%,6.25%
Ryan,Strome,2+,30.77%,21.15%,78.85%,51.92%,21.15%,15.38%,7.69%
Dmitri,Voronkov,1+,31.91%,19.15%,80.85%,48.94%,25.53%,8.51%,2.13%
Pavel,Zacha,2+,28.85%,17.31%,82.69%,59.62%,30.77%,7.69%,1.92%
Jason,Zucker,2+,37.78%,8.89%,91.11%,62.22%,24.44%,11.11%,4.44%
James,van-Riemsdyk,2+,32.69%,5.77%,94.23%,69.23%,36.54%,17.31%,5.77%`;

const shotReads = reads.split('\n');

    // Table body reference
    const tableBody = document.querySelector('#shotReadsTable tbody');
    let prevArrow = null;
    let prevHeader = null; // Added variable to store previously sorted header

    // Function to populate table with data
    function populateTable(data) {
        tableBody.innerHTML = '';
        data.forEach(line => {
            const [firstName, lastName, lineName, odds, zero, one, two, three, four, five] = line.split(',');
    
            const row = document.createElement('tr');
            row.innerHTML = `
                <td>${firstName} ${lastName}</td>
                <td>${lineName}</td>
                <td>${odds}</td>
                <td>${zero}</td>
                <td>${one}</td>
                <td>${two}</td>
                <td>${three}</td>
                <td>${four}</td>
                <td>${five}</td>
            `;
            tableBody.appendChild(row);
        });
    }

    // Initial population of table
    populateTable(shotReads);

    // Function to sort table data
    function sortTable(colIndex, header) {
        console.log('Sorting column index:', colIndex);
        const arrow = header.querySelector('.arrow');
        const isAscending = arrow.classList.contains('arrow-up');
        console.log('Sort direction:', isAscending ? 'Ascending' : 'Descending');

        // Remove arrow from previous header
        if (prevArrow && prevArrow !== arrow) {
            prevArrow.classList.remove('arrow-up', 'arrow-down');
            prevHeader.classList.remove('sorted'); // Remove sorted class from previously sorted column
        }

        // Toggle arrow direction
        arrow.classList.toggle('arrow-up', !isAscending);
        arrow.classList.toggle('arrow-down', isAscending);

        // Add sorted class to current header
        header.classList.add('sorted');
        
        // Update previous arrow and header
        prevArrow = arrow;
        prevHeader = header;

        // Get data type based on column index
        const dataType = getDataType(colIndex);
        console.log('Data type:', dataType);

        // Sort data
        shotReads.sort((a, b) => {
            const valA = getDataValue(a.split(',')[colIndex], dataType);
            const valB = getDataValue(b.split(',')[colIndex], dataType);

            if (typeof valA === 'string' && typeof valB === 'string') {
                // Case insensitive alphabetical sorting
                return isAscending ? valA.localeCompare(valB) : valB.localeCompare(valA);
            } else {
                // Numeric sorting
                console.log('Value A:', valA);
                console.log('Value B:', valB);
                return isAscending ? valA - valB : valB - valA;
            }
        });

        // Repopulate table
        populateTable(shotReads);
    }

    // Function to get data type of a column
    function getDataType(colIndex) {
        switch (colIndex) {
            case 0: // Player
            case 1: // Line
                return 'string';
            default: // Odds, 0, 1+, 2+, 3+, 4+, 5+
                return 'number';
        }
    }

    // Function to get data value
    function getDataValue(value, dataType) {
        return dataType === 'number' ? parseFloat(value) : value.toLowerCase();
    }

// Add this JavaScript to highlight the active link based on the current page
document.addEventListener('DOMContentLoaded', function() {
    var currentUrl = window.location.href;
    var navLinks = document.querySelectorAll('.nav-link');

    navLinks.forEach(function(navLink) {
        if (navLink.href === currentUrl) {
            navLink.classList.add('active');
        }
    });
});
</script>

</body>
</html>
