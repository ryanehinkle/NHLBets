<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Shot Reads Table</title>
<link rel="stylesheet" type="text/css" href="styles.css">
<link rel="preconnect" href="https://fonts.googleapis.com">
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
<link href="https://fonts.googleapis.com/css2?family=Oswald:wght@200..700&display=swap" rel="stylesheet">
<link rel="icon" type="image/png" href="nhl.svg"> <!-- Add favicon -->
<style>
    table {
        width: 100%;
        border-collapse: collapse;
        font-family: "Oswald", sans-serif; /* Use Oswald font */
    }
    th, td {
        padding: 8px;
        text-align: left;
        border-bottom: 1px solid #ddd;
        cursor: pointer;
        position: relative;
        font-family: "Oswald", sans-serif; /* Use Oswald font */
    }
    th {
        background-color: #f2f2f2;
    }
    th.sorted {
        background-color: #cfd8dc; /* Change the background color to highlight sorted column */
    }
    .arrow-up:after, .arrow-down:after {
        content: '';
        position: absolute;
        top: 50%;
        right: 5px;
        transform: translateY(-50%);
    }
    .arrow-up:after {
        border-left: 5px solid transparent;
        border-right: 5px solid transparent;
        border-bottom: 5px solid black;
    }
    .arrow-down:after {
        border-left: 5px solid transparent;
        border-right: 5px solid transparent;
        border-top: 5px solid black;
    }
</style>
</head>
<body class="oswald-font"> <!-- Apply oswald-font class to body -->
<!-- Nav bar -->
<nav class="navbar">
    <div class="navbar-links">
        <ul>
            <li><a href="index.html" class="nav-link">Shots</a></li>
            <li><a href="goals.html" class="nav-link">Goals</a></li>
            <li><a href="shotReads.html" class="nav-link">Reads</a></li>
            <li><a href="chart.html" class="nav-link">Chart</a></li>
        </ul>
    </div>
</nav>

<!-- Container for the table -->
<div class="container">
    <!-- Table structure -->
    <table id="shotReadsTable">
        <a href="preSorted.html" class="center">View presorted list</a>
        <div class="subtitle" id="subtitle">Odds = The percentage of games that have been the line</div>
        <div class="subtitle" id="subtitle">0-5+ = The percentage of games that have hit that prop</div>
        <thead>
            <tr>
                <th onclick="sortTable(1, this)">Player<span class="arrow"></span></th>
                <th onclick="sortTable(2, this)">Line<span class="arrow"></span></th>
                <th onclick="sortTable(3, this)">Odds<span class="arrow"></span></th>
                <th onclick="sortTable(4, this)">0<span class="arrow"></span></th>
                <th onclick="sortTable(5, this)">1+<span class="arrow"></span></th>
                <th onclick="sortTable(6, this)">2+<span class="arrow"></span></th>
                <th onclick="sortTable(7, this)">3+<span class="arrow"></span></th>
                <th onclick="sortTable(8, this)">4+<span class="arrow"></span></th>
                <th onclick="sortTable(9, this)">5+<span class="arrow"></span></th>
            </tr>
        </thead>
        <tbody>
        </tbody>
    </table>
</div>

<script>
// Data initialization
const reads = `Matthew,Boldy,2+,28.57%,4.08%,95.92%,81.63%,53.06%,36.73%,18.37%
Kyle,Connor,2+,20.51%,0.00%,100.00%,87.18%,66.67%,48.72%,35.90%
Rasmus,Dahlin,3+,22.81%,5.26%,94.74%,75.44%,57.89%,35.09%,21.05%
Joel,Eriksson-Ek,3+,25.00%,1.79%,98.21%,91.07%,76.79%,51.79%,26.79%
Zach,Hyman,3+,25.00%,1.92%,98.08%,92.31%,73.08%,48.08%,23.08%
Boone,Jenner,2+,29.27%,12.20%,87.80%,80.49%,51.22%,31.71%,12.20%
Kirill,Kaprizov,2+,26.00%,2.00%,98.00%,86.00%,60.00%,42.00%,28.00%
Connor,McDavid,2+,28.30%,1.89%,98.11%,84.91%,56.60%,37.74%,26.42%
Tage,Thompson,2+,26.09%,4.35%,95.65%,86.96%,60.87%,50.00%,30.43%
Connor,Bedard,3+,27.91%,9.30%,90.70%,76.74%,62.79%,34.88%,25.58%
Evan,Bouchard,1+,24.53%,7.55%,92.45%,67.92%,47.17%,33.96%,22.64%
Yegor,Chinakhov,1+,26.19%,19.05%,80.95%,54.76%,30.95%,23.81%,11.90%
Dylan,Cozens,2+,28.30%,15.09%,84.91%,69.81%,41.51%,26.42%,18.87%
Leon,Draisaitl,2+,30.91%,7.27%,92.73%,76.36%,45.45%,23.64%,14.55%
Nikolaj,Ehlers,1+,20.37%,5.56%,94.44%,74.07%,59.26%,38.89%,18.52%
Warren,Foegele,2+,33.96%,13.21%,86.79%,67.92%,33.96%,24.53%,13.21%
Johnny,Gaudreau,1+,25.93%,18.52%,81.48%,55.56%,33.33%,22.22%,11.11%
Ryan,Hartman,3+,27.45%,11.76%,88.24%,66.67%,47.06%,19.61%,5.88%
Seth,Jones,1+,35.71%,7.14%,92.86%,57.14%,38.10%,23.81%,19.05%
Evander,Kane,3+,26.92%,3.85%,96.15%,82.69%,61.54%,34.62%,19.23%
Kirill,Marchenko,2+,26.92%,5.77%,94.23%,75.00%,48.08%,25.00%,9.62%
Sean,Monahan,1+,29.09%,9.09%,90.91%,61.82%,40.00%,20.00%,7.27%
Joshua,Morrissey,3+,25.93%,11.11%,88.89%,68.52%,48.15%,22.22%,9.26%
John-Jason,Peterka,3+,23.21%,5.36%,94.64%,78.57%,57.14%,33.93%,16.07%
Mark,Scheifele,3+,37.50%,8.33%,91.67%,68.75%,52.08%,14.58%,4.17%
Jeff,Skinner,3+,20.83%,4.17%,95.83%,79.17%,62.50%,41.67%,20.83%
Alex,Tuch,1+,26.53%,4.08%,95.92%,69.39%,46.94%,24.49%,10.20%
Gabriel,Vilardi,3+,23.53%,11.76%,88.24%,67.65%,52.94%,29.41%,8.82%
Zachary,Werenski,2+,42.86%,2.38%,97.62%,88.10%,45.24%,26.19%,14.29%
Brock,Faber,2+,33.93%,23.21%,76.79%,51.79%,17.86%,12.50%,3.57%
Nick,Foligno,1+,30.00%,14.00%,86.00%,56.00%,38.00%,8.00%,6.00%
Jordan,Greenway,1+,38.64%,25.00%,75.00%,36.36%,20.45%,6.82%,2.27%
Tyler,Johnson,1+,28.57%,23.81%,76.19%,47.62%,33.33%,9.52%,7.14%
Philipp,Kurashev,1+,34.00%,12.00%,88.00%,54.00%,24.00%,8.00%,4.00%
Casey,Mittelstadt,1+,30.36%,19.64%,80.36%,50.00%,28.57%,10.71%,1.79%
Darnell,Nurse,1+,24.53%,13.21%,86.79%,62.26%,37.74%,15.09%,3.77%
Jack,Roslovic-2,1+,31.25%,28.13%,71.88%,40.63%,21.88%,18.75%,9.38%
Marco,Rossi,1+,25.00%,16.07%,83.93%,58.93%,33.93%,12.50%,3.57%
Dmitri,Voronkov,1+,31.25%,20.83%,79.17%,47.92%,25.00%,8.33%,2.08%
Mats,Zuccarello,1+,27.66%,6.38%,93.62%,65.96%,40.43%,25.53%,10.64%`;

const shotReads = reads.split('\n');

    // Table body reference
    const tableBody = document.querySelector('#shotReadsTable tbody');
    let prevArrow = null;
    let prevHeader = null; // Added variable to store previously sorted header

    // Function to populate table with data
    function populateTable(data) {
        tableBody.innerHTML = '';
        data.forEach(line => {
            const [firstName, lastName, lineName, odds, zero, one, two, three, four, five] = line.split(',');
    
            const row = document.createElement('tr');
            row.innerHTML = `
                <td>${firstName} ${lastName}</td>
                <td>${lineName}</td>
                <td>${odds}</td>
                <td>${zero}</td>
                <td>${one}</td>
                <td>${two}</td>
                <td>${three}</td>
                <td>${four}</td>
                <td>${five}</td>
            `;
            tableBody.appendChild(row);
        });
    }

    // Initial population of table
    populateTable(shotReads);

    // Function to sort table data
    function sortTable(colIndex, header) {
        console.log('Sorting column index:', colIndex);
        const arrow = header.querySelector('.arrow');
        const isAscending = arrow.classList.contains('arrow-up');
        console.log('Sort direction:', isAscending ? 'Ascending' : 'Descending');

        // Remove arrow from previous header
        if (prevArrow && prevArrow !== arrow) {
            prevArrow.classList.remove('arrow-up', 'arrow-down');
            prevHeader.classList.remove('sorted'); // Remove sorted class from previously sorted column
        }

        // Toggle arrow direction
        arrow.classList.toggle('arrow-up', !isAscending);
        arrow.classList.toggle('arrow-down', isAscending);

        // Add sorted class to current header
        header.classList.add('sorted');
        
        // Update previous arrow and header
        prevArrow = arrow;
        prevHeader = header;

        // Get data type based on column index
        const dataType = getDataType(colIndex);
        console.log('Data type:', dataType);

        // Sort data
        shotReads.sort((a, b) => {
            const valA = getDataValue(a.split(',')[colIndex], dataType);
            const valB = getDataValue(b.split(',')[colIndex], dataType);

            if (typeof valA === 'string' && typeof valB === 'string') {
                // Case insensitive alphabetical sorting
                return isAscending ? valA.localeCompare(valB) : valB.localeCompare(valA);
            } else {
                // Numeric sorting
                console.log('Value A:', valA);
                console.log('Value B:', valB);
                return isAscending ? valA - valB : valB - valA;
            }
        });

        // Repopulate table
        populateTable(shotReads);
    }

    // Function to get data type of a column
    function getDataType(colIndex) {
        switch (colIndex) {
            case 0: // Player
            case 1: // Line
                return 'string';
            default: // Odds, 0, 1+, 2+, 3+, 4+, 5+
                return 'number';
        }
    }

    // Function to get data value
    function getDataValue(value, dataType) {
        return dataType === 'number' ? parseFloat(value) : value.toLowerCase();
    }

// Add this JavaScript to highlight the active link based on the current page
document.addEventListener('DOMContentLoaded', function() {
    var currentUrl = window.location.href;
    var navLinks = document.querySelectorAll('.nav-link');

    navLinks.forEach(function(navLink) {
        if (navLink.href === currentUrl) {
            navLink.classList.add('active');
        }
    });
});
</script>

</body>
</html>
