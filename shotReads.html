<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Shot Reads Table</title>
<link rel="stylesheet" type="text/css" href="styles.css">
<link rel="preconnect" href="https://fonts.googleapis.com">
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
<link href="https://fonts.googleapis.com/css2?family=Oswald:wght@200..700&display=swap" rel="stylesheet">
<link rel="icon" type="image/png" href="nhl.svg"> <!-- Add favicon -->
<style>
    table {
        width: 100%;
        border-collapse: collapse;
        font-family: "Oswald", sans-serif; /* Use Oswald font */
    }
    th, td {
        padding: 8px;
        text-align: left;
        border-bottom: 1px solid #ddd;
        cursor: pointer;
        position: relative;
        font-family: "Oswald", sans-serif; /* Use Oswald font */
    }
    th {
        background-color: #f2f2f2;
    }
    th.sorted {
        background-color: #cfd8dc; /* Change the background color to highlight sorted column */
    }
    .arrow-up:after, .arrow-down:after {
        content: '';
        position: absolute;
        top: 50%;
        right: 5px;
        transform: translateY(-50%);
    }
    .arrow-up:after {
        border-left: 5px solid transparent;
        border-right: 5px solid transparent;
        border-bottom: 5px solid black;
    }
    .arrow-down:after {
        border-left: 5px solid transparent;
        border-right: 5px solid transparent;
        border-top: 5px solid black;
    }
</style>
</head>
<body class="oswald-font"> <!-- Apply oswald-font class to body -->
<!-- Nav bar -->
<nav class="navbar">
    <div class="navbar-links">
        <ul>
            <li><a href="index.html" class="nav-link">Shots</a></li>
            <li><a href="goals.html" class="nav-link">Goals</a></li>
            <li><a href="shotReads.html" class="nav-link">Reads</a></li>
            <li><a href="goalie.html" class="nav-link">Goalies</a></li>
            <li><a href="chart.html" class="nav-link">Chart</a></li>
        </ul>
    </div>
</nav>

<!-- Container for the table -->
<div class="container">
    <!-- Table structure -->
    <table id="shotReadsTable">
        <a href="preSorted.html" class="center">View presorted list</a>
        <div class="subtitle" id="subtitle">Odds = The percentage of games that have been the line</div>
        <div class="subtitle" id="subtitle">0-5+ = The percentage of games that have hit that prop</div>
        <thead>
            <tr>
                <th onclick="sortTable(1, this)">Player<span class="arrow"></span></th>
                <th onclick="sortTable(2, this)">Line<span class="arrow"></span></th>
                <th onclick="sortTable(3, this)">Odds<span class="arrow"></span></th>
                <th onclick="sortTable(4, this)">0<span class="arrow"></span></th>
                <th onclick="sortTable(5, this)">1+<span class="arrow"></span></th>
                <th onclick="sortTable(6, this)">2+<span class="arrow"></span></th>
                <th onclick="sortTable(7, this)">3+<span class="arrow"></span></th>
                <th onclick="sortTable(8, this)">4+<span class="arrow"></span></th>
                <th onclick="sortTable(9, this)">5+<span class="arrow"></span></th>
            </tr>
        </thead>
        <tbody>
        </tbody>
    </table>
</div>

<script>
// Data initialization
const reads = `Zach,Hyman,3+,25.45%,1.82%,98.18%,92.73%,72.73%,47.27%,23.64%
Evander,Kane,3+,25.45%,3.64%,96.36%,83.64%,63.64%,38.18%,18.18%
Chris,Kreider,2+,34.48%,3.45%,96.55%,86.21%,51.72%,32.76%,22.41%
Connor,McDavid,2+,28.57%,1.79%,98.21%,85.71%,57.14%,37.50%,26.79%
Artemi,Panarin,2+,20.69%,1.72%,98.28%,86.21%,65.52%,46.55%,25.86%
Vincent,Trocheck,1+,20.00%,13.33%,86.67%,66.67%,46.67%,28.33%,18.33%
Evan,Bouchard,1+,23.21%,8.93%,91.07%,67.86%,46.43%,32.14%,21.43%
Pavel,Buchnevich,3+,30.36%,10.71%,89.29%,75.00%,57.14%,26.79%,14.29%
Yegor,Chinakhov,1+,27.27%,18.18%,81.82%,54.55%,31.82%,22.73%,11.36%
Leon,Draisaitl,2+,32.76%,6.90%,93.10%,77.59%,44.83%,24.14%,15.52%
Warren,Foegele,2+,32.14%,12.50%,87.50%,67.86%,35.71%,25.00%,14.29%
Johnny,Gaudreau,1+,26.79%,19.64%,80.36%,53.57%,32.14%,21.43%,8.93%
Boone,Jenner,2+,27.91%,11.63%,88.37%,81.40%,53.49%,32.56%,11.63%
Jordan,Kyrou,3+,27.59%,3.45%,96.55%,77.59%,56.90%,29.31%,18.97%
Alexis,Lafreniere,3+,31.03%,10.34%,89.66%,77.59%,56.90%,25.86%,8.62%
Kirill,Marchenko,2+,27.78%,5.56%,94.44%,75.93%,48.15%,24.07%,9.26%
Ryan,Nugent-Hopkins,1+,36.36%,7.27%,92.73%,56.36%,41.82%,21.82%,9.09%
Darnell,Nurse,1+,25.00%,12.50%,87.50%,62.50%,39.29%,16.07%,3.57%
Zachary,Werenski,2+,40.91%,2.27%,97.73%,86.36%,45.45%,27.27%,13.64%
Mika,Zibanejad,3+,22.81%,10.53%,89.47%,68.42%,49.12%,26.32%,8.77%
Mattias,Ekholm,1+,30.91%,14.55%,85.45%,54.55%,34.55%,21.82%,9.09%
Justin,Faulk,1+,31.71%,9.76%,90.24%,58.54%,36.59%,24.39%,12.20%
Adam,Fox,1+,25.00%,22.92%,77.08%,52.08%,27.08%,6.25%,0.00%
Torey,Krug,1+,36.21%,5.17%,94.83%,58.62%,36.21%,17.24%,3.45%
Jack,Roslovic-2,1+,29.41%,26.47%,73.53%,44.12%,26.47%,20.59%,11.76%
Brayden,Schenn,1+,31.03%,12.07%,87.93%,56.90%,31.03%,12.07%,5.17%
Jacob,Trouba,2+,37.50%,12.50%,87.50%,57.14%,19.64%,8.93%,5.36%
Dmitri,Voronkov,1+,30.00%,20.00%,80.00%,50.00%,28.00%,10.00%,4.00%`;

const shotReads = reads.split('\n');

    // Table body reference
    const tableBody = document.querySelector('#shotReadsTable tbody');
    let prevArrow = null;
    let prevHeader = null; // Added variable to store previously sorted header

    // Function to populate table with data
    function populateTable(data) {
        tableBody.innerHTML = '';
        data.forEach(line => {
            const [firstName, lastName, lineName, odds, zero, one, two, three, four, five] = line.split(',');
    
            const row = document.createElement('tr');
            row.innerHTML = `
                <td>${firstName} ${lastName}</td>
                <td>${lineName}</td>
                <td>${odds}</td>
                <td>${zero}</td>
                <td>${one}</td>
                <td>${two}</td>
                <td>${three}</td>
                <td>${four}</td>
                <td>${five}</td>
            `;
            tableBody.appendChild(row);
        });
    }

    // Initial population of table
    populateTable(shotReads);

    // Function to sort table data
    function sortTable(colIndex, header) {
        console.log('Sorting column index:', colIndex);
        const arrow = header.querySelector('.arrow');
        const isAscending = arrow.classList.contains('arrow-up');
        console.log('Sort direction:', isAscending ? 'Ascending' : 'Descending');

        // Remove arrow from previous header
        if (prevArrow && prevArrow !== arrow) {
            prevArrow.classList.remove('arrow-up', 'arrow-down');
            prevHeader.classList.remove('sorted'); // Remove sorted class from previously sorted column
        }

        // Toggle arrow direction
        arrow.classList.toggle('arrow-up', !isAscending);
        arrow.classList.toggle('arrow-down', isAscending);

        // Add sorted class to current header
        header.classList.add('sorted');
        
        // Update previous arrow and header
        prevArrow = arrow;
        prevHeader = header;

        // Get data type based on column index
        const dataType = getDataType(colIndex);
        console.log('Data type:', dataType);

        // Sort data
        shotReads.sort((a, b) => {
            const valA = getDataValue(a.split(',')[colIndex], dataType);
            const valB = getDataValue(b.split(',')[colIndex], dataType);

            if (typeof valA === 'string' && typeof valB === 'string') {
                // Case insensitive alphabetical sorting
                return isAscending ? valA.localeCompare(valB) : valB.localeCompare(valA);
            } else {
                // Numeric sorting
                console.log('Value A:', valA);
                console.log('Value B:', valB);
                return isAscending ? valA - valB : valB - valA;
            }
        });

        // Repopulate table
        populateTable(shotReads);
    }

    // Function to get data type of a column
    function getDataType(colIndex) {
        switch (colIndex) {
            case 0: // Player
            case 1: // Line
                return 'string';
            default: // Odds, 0, 1+, 2+, 3+, 4+, 5+
                return 'number';
        }
    }

    // Function to get data value
    function getDataValue(value, dataType) {
        return dataType === 'number' ? parseFloat(value) : value.toLowerCase();
    }

// Add this JavaScript to highlight the active link based on the current page
document.addEventListener('DOMContentLoaded', function() {
    var currentUrl = window.location.href;
    var navLinks = document.querySelectorAll('.nav-link');

    navLinks.forEach(function(navLink) {
        if (navLink.href === currentUrl) {
            navLink.classList.add('active');
        }
    });
});
</script>

</body>
</html>
